var weixinextension;!function(e){var t=function(e){function t(t){var i=this;e.call(this),this.loop=!1,this.loaded=!1,this.played=!1,this.onClickHandler=function(e){return console.log("onclick"),i.src?void(i.played||(i.played=!0,i.videobox.appendChild(i.video),i.video.currentTime=0,i.video.play(),"iOS"==egret.Capabilities.os&&(i.videobox.style.display=""),i.video.addEventListener("timeupdate",i.onTimeUpdateHandler),i.video.addEventListener("ended",i.onEndedHandler))):void egret.error("请使用 load 方法设置视频的 url 地址")},this.onTimeUpdateHandler=function(e){i.video.currentTime<2&&i.video.currentTime>=.5&&(i.posterDiv.style.display="none",i.videobox.style.display="",i.video.removeEventListener("timeupdate",i.onTimeUpdateHandler))},this.onEndedHandler=function(e){i.loop?(i.video.currentTime=0,i.video.play()):(i.posterDiv.style.display="",i.videobox.removeChild(i.video)),i.dispatchEventWith(egret.Event.COMPLETE)},this.src=t;var o=document.createElement("div");this.container=o,o.id="video",o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.top="0px",o.style.left="0px";var n=document.createElement("div");this.videobox=n,n.style.boxSizing="border-box",n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.display="none",n.style.top="0px",o.appendChild(n);var s=document.createElement("img");this.posterDiv=s,s.style.width="100%",s.style.position="absolute",s.style.top="0px",o.appendChild(s),this.createVideo()}__extends(t,e);var i=__define,o=t,n=o.prototype;return n.show=function(){document.body.appendChild(this.container),this.container.addEventListener("click",this.onClickHandler)},n.close=function(){document.body.removeChild(this.container),this.video.pause(),this.container.removeEventListener("click",this.onClickHandler),this.video.removeEventListener("timeupdate",this.onTimeUpdateHandler),this.video.removeEventListener("ended",this.onEndedHandler)},n.load=function(e){this.src?(this.src=e,this.createVideo()):(this.src=e,this.video.src=this.src)},i(n,"poster",function(){return this.posterUrl},function(e){this.posterUrl=e,this.posterDiv.src=e}),n.createVideo=function(){this.played=!1,this.posterDiv.style.display="",this.videobox.style.display="none",this.video&&(this.video.parentNode&&(this.videobox.removeChild(this.video),this.video.pause()),this.video=null);var e=document.createElement("video");this.video=e,e.setAttribute("webkit-playsinline","true"),e.setAttribute("preload","auto"),e.style.width="100%",this.src&&(e.src=this.src)},t}(egret.EventDispatcher);e.FullScreenVideo=t,egret.registerClass(t,"weixinextension.FullScreenVideo")}(weixinextension||(weixinextension={}));